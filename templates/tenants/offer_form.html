{% extends 'base.html' %}
{% block title %}{% if object %}Edit Offer{% else %}Create Offer{% endif %} - {{ business.name }}{% endblock %}
{% block content %}
<div class="bg-gray-100 min-h-screen">
  {% include 'tenants/_business_banner.html' with active_tab='offers' %}
  <div class="container mx-auto px-4 py-8 max-w-4xl">
    <div class="bg-white rounded-lg shadow-md p-6">
      <h1 class="text-2xl font-bold mb-6">{% if object %}Edit Offer{% else %}Create Offer{% endif %}</h1>
      <style>
        /* Scoped styles for consistent, modern inputs */
        .modern-form label { display:block; font-weight:600; font-size:0.875rem; color:#374151; margin-bottom:0.25rem; }
        .modern-form input[type="text"],
        .modern-form input[type="number"],
        .modern-form input[type="date"],
        .modern-form input[type="file"],
        .modern-form input[type="email"],
        .modern-form input[type="url"],
        .modern-form select,
        .modern-form textarea {
          width:100%; border:1px solid #D1D5DB; border-radius:0.375rem; padding:0.5rem 0.75rem;
          font-size:0.875rem; line-height:1.25rem; color:#111827; background-color:#fff;
        }
        .modern-form textarea { height: 110px; min-height:110px; resize:vertical; }
        .modern-form .help { font-size:0.75rem; color:#6B7280; margin-top:0.25rem; }
        .modern-form .error { font-size:0.75rem; color:#DC2626; margin-top:0.25rem; }
      </style>
      <form method="post" enctype="multipart/form-data" class="modern-form">
        {% csrf_token %}
        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
          <div>
            {{ form.title.label_tag }}
            {{ form.title }}
            {% if form.title.errors %}<p class="error">{{ form.title.errors|striptags }}</p>{% endif %}
          </div>

          <div>
            {{ form.type.label_tag }}
            {{ form.type }}
            {% if form.type.errors %}<p class="error">{{ form.type.errors|striptags }}</p>{% endif %}
          </div>

          <div>
            {{ form.points_required.label_tag }}
            {{ form.points_required }}
            {% if form.points_required.errors %}<p class="error">{{ form.points_required.errors|striptags }}</p>{% endif %}
          </div>

          <div>
            {{ form.points_multiplier.label_tag }}
            {{ form.points_multiplier }}
            {% if form.points_multiplier.errors %}<p class="error">{{ form.points_multiplier.errors|striptags }}</p>{% endif %}
          </div>

          <div>
            {{ form.discount_percentage.label_tag }}
            {{ form.discount_percentage }}
            {% if form.discount_percentage.errors %}<p class="error">{{ form.discount_percentage.errors|striptags }}</p>{% endif %}
          </div>

          <div>
            {{ form.discount_amount.label_tag }}
            {{ form.discount_amount }}
            {% if form.discount_amount.errors %}<p class="error">{{ form.discount_amount.errors|striptags }}</p>{% endif %}
          </div>

          <div>
            {{ form.valid_from.label_tag }}
            {{ form.valid_from }}
            {% if form.valid_from.errors %}<p class="error">{{ form.valid_from.errors|striptags }}</p>{% endif %}
          </div>

          <div>
            {{ form.valid_until.label_tag }}
            {{ form.valid_until }}
            {% if form.valid_until.errors %}<p class="error">{{ form.valid_until.errors|striptags }}</p>{% endif %}
          </div>

          <div>
            {{ form.specific_tier.label_tag }}
            {{ form.specific_tier }}
            {% if form.specific_tier.errors %}<p class="error">{{ form.specific_tier.errors|striptags }}</p>{% endif %}
          </div>

          <div class="md:col-span-2">
            {{ form.description.label_tag }}
            {{ form.description }}
            {% if form.description.errors %}<p class="error">{{ form.description.errors|striptags }}</p>{% endif %}
          </div>

          <div class="md:col-span-2">
            {{ form.free_item_description.label_tag }}
            {{ form.free_item_description }}
            {% if form.free_item_description.errors %}<p class="error">{{ form.free_item_description.errors|striptags }}</p>{% endif %}
          </div>

          <div class="md:col-span-2">
            {{ form.image.label_tag }}
            {{ form.image }}
            {% if form.image.errors %}<p class="error">{{ form.image.errors|striptags }}</p>{% endif %}
          </div>

          {% if form.is_active %}
          <div class="md:col-span-2">
            <label class="inline-flex items-center gap-2">
              {{ form.is_active }}
              <span>Active</span>
            </label>
            {% if form.is_active.errors %}<p class="error">{{ form.is_active.errors|striptags }}</p>{% endif %}
          </div>
          {% endif %}
        </div>
        <div class="mt-6 flex space-x-3">
          <button type="submit" class="bg-blue-800 text-white px-4 py-2 rounded-md hover:bg-blue-700">Save</button>
          <a href="{% url 'business_offers' slug=business.slug %}" class="px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
